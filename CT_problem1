<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>사라진 원소를 찾아라!</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; background: #f9f9f9; }
    h1 { color: #1c3faa; }
    select, button, input { padding: 8px; margin: 5px; }
    .question, .timer-settings { background: #e0f2ff; padding: 15px; border-radius: 8px; margin-top: 20px; }
    .result { font-weight: bold; margin-top: 10px; }
    .correct { color: green; }
    .incorrect { color: red; }
    .modal { display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; border: 1px solid #ccc; padding: 20px; z-index: 1000; }
    .overlay { display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); z-index: 999; }
  </style>
</head>
<body>
  <h1>사라진 원소를 찾아라!</h1>
  <p><strong>대상 및 교과:</strong> 고2 화학</p>

  <div class="timer-settings">
    <label>문제 범위:</label>
    <select id="range">
      <option value="20">1번부터 20번까지</option>
    </select>
    <label>제한 시간:</label>
    <select id="timeLimit">
      <option value="30">30초</option>
      <option value="60">1분</option>
    </select>
    <button onclick="startQuiz()">문제 풀기</button>
  </div>

  <div class="question" id="questionBox" style="display:none;">
    <p><strong>지문:</strong><br>과학실험실에서 사라진 원소를 찾아야 해. (단, 과학실험실에는 1번부터 20번까지의 원소를 보관해둔다.)</p>
    <p><strong>규칙:</strong><br>원소가 남기고 간 단서는 보기와 같아.</p>
    <p><strong>보기:</strong></p>
    <ol id="clues"></ol>
    <p><strong>문제:</strong> 사라진 원소의 이름은 무엇일까?</p>
    <input type="text" id="userAnswer" placeholder="원소 이름 입력">
    <button onclick="checkAnswer()">확인</button>
    <p class="result" id="result"></p>
  </div>

  <div class="overlay" id="overlay"></div>
  <div class="modal" id="timeoutModal">
    <p>⏰ 시간이 끝났습니다!</p>
    <button onclick="restartQuiz()">다시 시작</button>
  </div>

  <script>
    const elements = [
      { num: 1, name: '수소', metal: false, group: 1, hydrogenBond: true },
      { num: 2, name: '헬륨', metal: false, group: 1 },
      { num: 3, name: '리튬', metal: true, group: 2 },
      { num: 4, name: '베릴륨', metal: true, group: 2 },
      { num: 5, name: '붕소', metal: false, group: 2 },
      { num: 6, name: '탄소', metal: false, group: 2, hydrogenBond: false },
      { num: 7, name: '질소', metal: false, group: 2, hydrogenBond: true },
      { num: 8, name: '산소', metal: false, group: 2, hydrogenBond: true },
      { num: 9, name: '플루오린', metal: false, group: 2, hydrogenBond: true },
      { num: 10, name: '네온', metal: false, group: 2 },
      { num: 11, name: '나트륨', metal: true, group: 3 },
      { num: 12, name: '마그네슘', metal: true, group: 3 },
      { num: 13, name: '알루미늄', metal: true, group: 3 },
      { num: 14, name: '규소', metal: false, group: 3 },
      { num: 15, name: '인', metal: false, group: 3 },
      { num: 16, name: '황', metal: false, group: 3, hydrogenBond: false },
      { num: 17, name: '염소', metal: false, group: 3 },
      { num: 18, name: '아르곤', metal: false, group: 3 },
      { num: 19, name: '칼륨', metal: true, group: 4 },
      { num: 20, name: '칼슘', metal: true, group: 4 },
    ];

    let timer;
    let currentAnswer = '';

    function generateRandomClue() {
      const candidates = elements.filter(e => e.hydrogenBond);
      const chosen = candidates[Math.floor(Math.random() * candidates.length)];
      currentAnswer = chosen.name;

      const clues = [
        chosen.metal === false ? '나는 비금속이야.' : '나는 금속이야.',
        `같은 주기에 있는 금속 원소보다 원자반지름이 ${chosen.metal ? '크' : '작'}아.`,
        `내 원자번호는 ${chosen.num % 2 === 0 ? '짝수' : '홀수'}야.`,
        chosen.hydrogenBond ? '수소결합이 가능한 원소야.' : '수소결합이 불가능한 원소야.'
      ];

      document.getElementById('clues').innerHTML = clues.map(c => `<li>${c}</li>`).join('');
    }

    function startQuiz() {
      document.getElementById('questionBox').style.display = 'block';
      document.getElementById('result').textContent = '';
      document.getElementById('result').className = 'result';
      document.getElementById('userAnswer').value = '';
      generateRandomClue();
      const timeLimit = parseInt(document.getElementById('timeLimit').value);
      clearTimeout(timer);
      timer = setTimeout(() => {
        document.getElementById('overlay').style.display = 'block';
        document.getElementById('timeoutModal').style.display = 'block';
      }, timeLimit * 1000);
    }

    function restartQuiz() {
      document.getElementById('overlay').style.display = 'none';
      document.getElementById('timeoutModal').style.display = 'none';
      startQuiz();
    }

    function checkAnswer() {
      const userInput = document.getElementById('userAnswer').value.trim();
      const resultText = document.getElementById('result');
      if (userInput === currentAnswer) {
        resultText.textContent = '정답입니다!';
        resultText.className = 'result correct';
      } else {
        resultText.textContent = `오답입니다. 정답은 ${currentAnswer}입니다.`;
        resultText.className = 'result incorrect';
      }
    }
  </script>
</body>
</html>
