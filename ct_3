<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>원소 미로 탈출</title>
  <style>
    body {
      font-family: sans-serif;
    }
    h1 {
      margin-bottom: 5px;
    }
    .section {
      margin: 15px 0;
    }
    .maze {
      display: grid;
      grid-template-columns: repeat(11, 40px);
      grid-template-rows: repeat(12, 40px);
      gap: 1px;
    }
    .cell {
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      border: 1px solid #aaa;
      user-select: none;
      font-weight: bold;
    }
    .white { background-color: white; }
    .gray { background-color: lightgray; pointer-events: none; }
    .selected { background-color: lightblue !important; }
    .controls { margin: 10px 0; }
    .answer-section { margin-top: 20px; display: none; }
    #maze { display: none; }
  </style>
</head>
<body>
  <h1>원소 미로 탈출</h1>
  <div>대상 및 교과: 고1 통합과학</div>

  <div class="section">
    <strong>지문:</strong>
    <p>카피바라는 미로에 담긴 숫자를 해석하여 미로를 탈출하고자 한다.</p>
  </div>

  <div class="section">
    <strong>규칙:</strong>
    <ul>
      <li>‣ 규칙1: 흰색 블럭은 지나갈 수 있는 블럭이다.</li>
      <li>‣ 규칙2: 회색 블럭은 지나갈 수 없는 블럭이다.</li>
      <li>‣ 규칙3: 지나간 블럭은 다시 지나갈 수 없다.</li>
      <li>‣ 규칙4: 모든 원소 기호를 지나가며, 원자 번호의 오름차순으로 최단거리를 지나가야한다.</li>
    </ul>
  </div>

  <div class="section">
    <strong>미로:</strong><br>
    <div class="maze" id="maze"></div>
  </div>

  <div class="section">
    <strong>문제:</strong>
    <p>카피바라는 입구부터 흰색 블럭을 따라 걷는다. 원소 번호의 오름차순으로 걸어나갈 수 있도록 최단거리로 이을 때, 나오는 숫자는?</p>
  </div>

  <div class="controls">
    <button onclick="startProblem()">게임 시작</button>
    <div id="timerDisplay"></div>
  </div>

  <div class="answer-section" id="answerSection">
    <label for="answer">정답 입력:</label>
    <input type="number" id="answer">
    <button onclick="checkAnswer()">제출</button>
  </div>

  <script>
    const whiteCells = new Set([
      "0,4",
      "1,1","1,2","1,3","1,4","1,6","1,7","1,8",
      "2,1","2,3","2,4","2,5","2,6","2,8","2,9",
      "3,1","3,2","3,3","3,4","3,5","3,6","3,7","3,9",
      "4,1","4,2","4,3","4,5","4,6","4,7","4,8","4,9",
      "5,1","5,2","5,3","5,4","5,5","5,6","5,7","5,8","5,9",
      "6,1","6,2","6,3","6,4","6,5","6,6","6,7","6,8","6,9",
      "7,1","7,2","7,3","7,4","7,5","7,6","7,7","7,8","7,9",
      "8,1","8,2","8,3","8,4","8,5","8,6","8,7","8,9",
      "9,1","9,3","9,4","9,5","9,6","9,8","9,9",
      "10,1","10,2","10,3","10,4","10,6","10,7","10,8"
    ]);

    const elements = {
      "0,4": "입구",
      "1,4": "H",
      "2,1": "He",
      "9,1": "Li",
      "10,4": "Be",
      "6,4": "B",
      "6,5": "Al",
      "6,2": "C",
      "4,5": "N",
      "2,5": "O",
      "1,7": "F",
      "5,9": "Ne",
      "10,8": "Na",
      "9,5": "Mg"
    };

    const rows = 12;
    const cols = 11;
    const mazeEl = document.getElementById('maze');
    let isDrawing = false;

    function renderMaze() {
      mazeEl.innerHTML = '';
      for (let row = 0; row < rows; row++) {
        for (let col = 0; col < cols; col++) {
          const el = document.createElement('div');
          el.classList.add('cell');
          const key = `${row},${col}`;

          if (whiteCells.has(key)) {
            el.classList.add('white');
            el.textContent = elements[key] || "";
            el.addEventListener('mousedown', () => {
              isDrawing = true;
              el.classList.add('selected');
            });
            el.addEventListener('mouseover', () => {
              if (isDrawing) el.classList.add('selected');
            });
          } else {
            el.classList.add('gray');
          }

          mazeEl.appendChild(el);
        }
      }
    }

    document.addEventListener('mouseup', () => {
      isDrawing = false;
    });

    function startProblem() {
      renderMaze();
      document.getElementById('maze').style.display = 'grid';
      document.getElementById('timerDisplay').textContent = '게임이 시작되었습니다!';
      document.getElementById('answerSection').style.display = 'block';
    }

    function checkAnswer() {
      const ans = document.getElementById('answer').value;
      if (ans === '60') {
        alert('정답입니다!');
      } else {
        alert('오답입니다. 다시 시도해보세요.');
      }
    }
  </script>
</body>
</html>
